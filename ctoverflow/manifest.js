const data = [
    {
        name: "Kayleen Delgado-Ruiz",
        date: "Aug 16, 2021",
        locations: [
            {
                name: "South Hartford Conveyance and Storage Tunnel",
                coords: [41.73674430872642, -72.67575525404689]
            }
        ],
        link: "https://www.ctpublic.org/news/2021-08-16/when-it-rains-it-poops-the-mdcs-efforts-to-keep-sewage-out-of-conn-waterways",
        description: (
            <>
                <p>
                    Cause: Combined sewer systems, merge stormwater and
                    household water into one big pipee, and when it rains a lot,
                    those pipes can get overloaded, forcing regional water
                    officials to dump that dirty water directly into rivers and
                    streams.
                </p>
                <p>
                    Effect: Bacteria, viruses, toxins, and avoid river for 14
                    hours
                </p>
            </>
        )
    },
    {
        name: "Izabella",
        date: "July 12, 2022",
        locations: [
            {
                name: "Exchange Street Pumping Station",
                coords: [42.1469206073741, -72.61250114011712]
            },
            {
                name: "James/Syrek Streets",
                coords: [42.201897735726405, -72.56850012780444]
            },
            {
                name: "Leslie Street Pumping Station",
                coords: [42.19006589325471, -72.60623453359632]
            },
            {
                name: "Jones Ferry Road Pumping Station",
                coords: [42.17286160401009, -72.63005855202837]
            },
            {
                name: "449 Front Street",
                coords: [42.148495476163134, -72.59942251352969]
            },
            {
                name: "510 Front Street",
                coords: [42.14792975563323, -72.5975079272422]
            },
            {
                name: "Main Street West of Deady Bridge",
                coords: [42.161047113823294, -72.58209676433567]
            },
            {
                name: "227 East Main Street",
                coords: [42.15877276767972, -72.57826998472204]
            },
            {
                name: "Grattan/Hearthstone",
                coords: [42.16256576502519, -72.58819322570375]
            },
            {
                name: "80 Medina Street",
                coords: [42.153326900037435, -72.62375447121526]
            }
        ],
        link: "https://www.wwlp.com/news/local-news/avoid-contact-with-connecticut-river-and-chicopee-river-due-to-sewer-discharge/",
        description: (
            <>
                <p>
                    Thunderstorms caused sewer overflows to discharge into the
                    Connecticut River and Chicopee River and this affected areas
                    in Chicopee, Holyoke, Springfield, West Springfield,
                    Longmeadow, and Agawam. People were told to avoid the areas
                    for 48 hours.
                </p>
            </>
        )
    },
    {
        name: "Kayla",
        date: "July 7, 2022",
        locations: [
            {
                name: "Agawam Westfield River",
                coords: [42.10084144466189, -72.64701052668059]
            }
        ],
        link: "https://www.thereminder.com/localnews/agawam/anyones-guess-when-agawam-sewer-pipe-began-leaking/",
        description: (
            <>
                <p>
                    One of the pipes had broke although they go through daily
                    inspection the pipe that broke several hundred feet from the
                    pump site, meaning it doesn’t go through inspections.
                </p>
            </>
        )
    },
    {
        name: "Kyle",
        date: "Aug 22, 2019",
        locations: [
            {
                name: "South Hadley Water Treatment Facility",
                coords: [42.208797356156936, -72.5886192187634]
            }
        ],
        link: "https://www.gazettenet.com/South-Hadley-agrees-to-sewer-repairs-after-sewage-dumped-Connecticut-River-in-2019-42483301",
        description: (
            <>
                <p>
                    On August 22nd 2019 284,000 gallons of sewage spilled from
                    the South Hadley treatment facility. This spill was caused
                    after a understaffed treatment plants bypass line ruptured
                    while a contractor was working to replace a valve. Sewage
                    could have backed up into neighboring homes so the emergency
                    bypass was opened and raw sewage was dumped into the river.
                    No fish were affected and the river was safe to go in.
                </p>
            </>
        )
    },
    {
        name: "Jaylee",
        date: "Aug 6, 2020",
        locations: [
            {
                name: "Springfield's Indian Orchard Water Treatment Facility",
                coords: [42.128214261101895, -72.55217494245464]
            }
        ],
        link: "https://www.courant.com/2020/08/06/deep-more-than-100000-gallons-of-sewage-dirty-water-flows-from-massachusetts-into-the-connecticut-river/",
        description: (
            <>
                <p>
                    On August 6th, 2020, the department of energy sent thousands
                    of gallons of sewage was released into the Chicopee River,
                    which feeds out into the Connecitut River. The first flood
                    happned at the Indian Orchard facility and was leaked
                    direcly into the Chicopee river. A water main break the next
                    day at the York Street pumping station caused fooding along
                    the connecticut River, which contained high levels of
                    sewage. Authority is saying to stay out of the river until
                    the end of that week till Friday.
                </p>
            </>
        )
    },
    {
        name: "Emily",
        date: "Nov 11, 2022",
        locations: [
            {
                name: "Holyoke Water Pollution Control Facility",
                coords: [42.19265742290529, -72.61252626165368]
            }
        ],
        link: "https://www.wwlp.com/news/sewage-leak-into-connecticut-river/",
        description: (
            <>
                <p>Cause: An abundance of rain from Tropical storm Nicole</p>
                <p>
                    Effect:The precipitation caused sewer overflow discharge
                    from the sewage collection system into the Connecticut
                    River.
                </p>
            </>
        )
    },
    {
        name: "Sydney Dion",
        date: "Mar 16, 2023",
        locations: [
            {
                name: "Holyoke Water Pollution Control Facility",
                coords: [42.19265742290529, -72.61252626165368]
            }
        ],
        link: "https://www.wwlp.com/news/top-stories/sewage-overflow-in-holyokes-connecticut-river/",
        description: (
            <>
                <p>
                    Within the previous days of March 16th, 2023, recent heavy
                    rain/snow mix caused the city of Holyoke “alert the
                    community of wastewater being released into the Connecticut
                    River.” The wastewater discharge may have negative water
                    quality impacts downstream, including the Connecticut River.
                    Activities involving water are discouraged, such as
                    swimming, fishing, and boating. Holyoke’s Department of
                    Public Works says to avoid contact with the water for 48
                    hours to avoid “due to any increased health risks from
                    bacteria and other pollutants.” The discharge consists of
                    rainwater, untreated sewage, or possibly even treated
                    sewage. As of right now, there is no effort to clean up
                    damage or prevent this kind of event again.
                </p>
            </>
        )
    },
    {
        name: "Emily Boyer",
        date: "May 10, 2022",
        locations: [
            {
                name: "Brickyard Brook Conservation Area",
                coords: [42.26137170543962, -72.6534777027815]
            },
            {
                name: "Cherry St",
                coords: [42.26351447304863, -72.65854691072056]
            }
        ],
        link: "",
        description: (
            <>
                <p>Caused by: A broken 8 inch sewer pipe</p>
                <p>
                    Due to the broken pipe, there was construction to help
                    repair it. The people living there could not go in the
                    Brickyard Brook for at least 48 hours after the spill.
                </p>
                <p>
                    Easthampton replaced/repaired the pipe so that there was no
                    further spillage.
                </p>
            </>
        )
    },
    {
        name: "Kyler Viafara",
        date: "Sep 9, 2019",
        locations: [
            {
                name: "York Street Pump Station",
                coords: [42.09374034614573, -72.58041017240066]
            }
        ],
        link: "https://www.masslive.com/news/2019/09/springfield-pump-station-malfunction-triggers-90000-gallon-wastewater-release-in-connecticut-river.html",
        description: (
            <>
                <ul>
                    <li>
                        Equipment malfunction released approximately 90,000
                        gallons of untreated wastewater into the Connecticut
                        River.
                    </li>
                    <li>
                        Malfunction at York Street pump station on Sep. 9, 2019
                    </li>
                    <li>
                        Occurred at "an outfall structure at the end of West
                        York Street" from 7:20AM to 8AM
                    </li>
                </ul>
            </>
        )
    },
    {
        name: "Abby Carvide",
        date: "Oct 5, 2022",
        locations: [
            {
                name: "Holyoke Water Pollution Control Facility",
                coords: [42.19265742290529, -72.61252626165368]
            }
        ],
        link: "https://www.masslive.com/news/2022/10/heavy-rain-causes-holyoke-sewer-overflow-into-the-connecticut-river.html#:~:text=Heavy%20amounts%20of%20rain%20in,heavy%20rain%20around%209%20p.m",
        description: (
            <>
                <p>
                    At 9am on October 5, 2022, the Holyoke Pollution Control
                    Facility began to see an overflow that came along with heavy
                    rain. It was expected to rain for at least the next 24
                    hours. With the heavy rain, Holyoke let go of wastewater in
                    the Connecticut River. This is to prevent backing up the
                    sewers and flooding the streets. Releasing overflow is a
                    very common practice in many areas. Activity involving the
                    Connecticut River was very much discouraged and done at your
                    own risk - the water quality downstream was also suspected
                    to be affected.
                </p>
            </>
        )
    },
    {
        name: "Garrett",
        date: "Mar 19, 2011",
        locations: [
            {
                name: "Agawam Westfield River",
                coords: [42.10084144466189, -72.64701052668059]
            }
        ],
        link: "https://www.masslive.com/news/2011/03/raw_sewage_reportedly_spills_i.html",
        description: (
            <>
                <p>
                    A private contractor was doing construction and ended up
                    hitting two pipes which were damaged in the incident
                    releasing sewage into the ground around the river. They
                    claim that this river is not drinking water nor do people
                    swim or boat in it so it has no risk to the people. However,
                    getting sewage into the river can destroy wildlife and make
                    it an unsuitable habitat for the species living there.
                </p>
            </>
        )
    },
    {
        name: "Evan",
        date: "Nov 7, 2018",
        locations: [
            {
                name: "Holyoke Dam",
                coords: [42.21300222926304, -72.60208495771032]
            }
        ],
        link: "https://www.nepm.org/regional-news/2018-11-07/in-holyoke-broken-sewer-sends-unknown-amount-of-sewage-into-connecticut-river",
        description: (
            <>
                <p>
                    Unknown amounts of raw sewage was spilled into the
                    Connecticut River by a ruptured sewage pipe. It happened
                    underground on the previous Monday, on a steep embankment
                    north of the Holyoke dam. It seems the earth that supported
                    the pipe had eroded and due to that lack of support, the
                    pipe broke. However, it seems the 50 year old pipe was
                    checked the Saturday before. Those types of checks are
                    required, however it seems that they still didn’t see it
                    coming, with the rupture happening 600 feet away from the
                    pipe’s output.
                </p>
            </>
        )
    }
];

export function mapData() {
    const tweaked = data.flatMap(event => {
        return event.locations.map(location => ({
            name: event.name,
            date: event.date,
            link: event.link,
            description: event.description,
            ...location
        }));
    });
    let records = [];
    data.map(event => {
        event.locations.map(location => {
            // Check if location's name is already in records
            let index = records.findIndex(x => x.name === location.name);
            if (index >= 0) {
                // Already in records, so push
                records[index].events.push({
                    name: event.name,
                    date: event.date,
                    link: event.link,
                    description: event.description
                });
            } else {
                // Not in records yet
                records.push({
                    name: location.name,
                    coords: location.coords,
                    events: [
                        {
                            name: event.name,
                            date: event.date,
                            link: event.link,
                            description: event.description
                        }
                    ]
                });
            }
        });
    });
    return records;
}

export default data;
